
<!DOCTYPE html>
<html lang="en">
    <head>

        <meta charset="utf-8">

        <title>{{title}}</title>
        <!--
        Comila Template
        http://www.templatemo.com/tm-490-comila
        -->
        <meta http-equiv="X-UA-Compatible" content="IE=Edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="keywords" content="">
        <meta name="description" content="">

        <!-- stylesheets css -->
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/animate.min.css">

        <link rel="stylesheet" href="css/et-line-font.css">
        <link rel="stylesheet" href="css/font-awesome.min.css">

        <link rel="stylesheet" href="css/vegas.min.css">
        <link rel="stylesheet" href="css/style.css">

        <!-- javscript js -->
        <script src="js/jquery.js"></script>
        <script src="js/bootstrap.min.js"></script>


        <link href='https://fonts.googleapis.com/css?family=Rajdhani:400,500,700' rel='stylesheet' type='text/css'>

    </head>
    <body>

        <!-- preloader section -->
        <section class="preloader">
            <div class="sk-circle">
                <div class="sk-circle1 sk-child"></div>
                <div class="sk-circle2 sk-child"></div>
                <div class="sk-circle3 sk-child"></div>
                <div class="sk-circle4 sk-child"></div>
                <div class="sk-circle5 sk-child"></div>
                <div class="sk-circle6 sk-child"></div>
                <div class="sk-circle7 sk-child"></div>
                <div class="sk-circle8 sk-child"></div>
                <div class="sk-circle9 sk-child"></div>
                <div class="sk-circle10 sk-child"></div>
                <div class="sk-circle11 sk-child"></div>
                <div class="sk-circle12 sk-child"></div>
            </div>
        </section>
        <script>
$().ready(function () {
    cargarNombreCategoria();
    cargarTabla();

});

function cargarNombreCategoria() {
    var url = 'http://localhost:3000/lista/categorias';
    $.ajax({
        url: url,
        type: 'get',
        dataType: 'json',
        success: function (data, textStatus, jqXHR) {
            console.log(data);
            var html = "<option value=''>Selecciona la categoria</option>";
            $.each(data, function (i, item) {
                html += '<option style="color: #333;" class="form-control" value="' + item.id + '">' + item.nombre + '</option>';
            });
            $("#categoria").html(html);
            $("#categoria1").html(html);

        }, error: function (jqXHR, textStatus, errorThrown) {
            console.log(jqXHR.responseText);
        }

    });
}
function cargarTabla() {
    var url = "http://localhost:3000/lista/productos";       ///test/sw/listaProdLot     
    $.ajax({
        url: url,
        type: 'GET',
        dataType: 'JSON',

        success: function (data, textStatus, jqXHR) {
            console.log(data);
            var html = "";

            $.each(data, function (i, item) {
                html += '<tr>';
                html += '<td>' + (i + 1) + '</td>';
                html += '<td>' + item.marca + '</td>';
                html += '<td>' + item.nombre + '</td>';
                html += '<td>' + item.subnombre + '</td>';
                html += '<td> <img style="width: 120px; height: 120px;" src="/img/' + item.foto + '"></td>';
                html += '<td>' + '$ ' + item.precio + '</td>';
                html += '<td><a type="button" id="' + i + '" class="editar" data-toggle="modal" data-target="#modal1">Editar</a></td>';
                html += '<script>';
                html += '$("#' + i + '").click(function () {';
                html += '$("#external1").val("' + item.external_id + '");';
                html += '$("#categoria1").val("' + item.categorium.nombre + '");';
                html += '$("#marca").val("' + item.marca + '");';
                html += '$("#nombre").val("' + item.nombre + '");';
                html += '$("#detalle").val("' + item.subnombre + '");';
                html += '$("#precio").val("' + item.precio + '");';
                html += '});';
                html += '</scrip' + 't>';
                html += '</tr>';
            });

            html += '</tr>';

            $("#tabla tbody").html(html);
        },
        error: function (jqXHR, textStatus, errorThrown) {
            console.log(jqXHR.responseText);
        }
    });
}
        </script>

        <!-- registro clientes -->
        <section id="contact">
            <div class="container">
                <div class="row">

                    <div class="col-md-offset-2 col-md-8 col-sm-12">
                        <div class="section-title">
                            <h1 class="wow fadeInUp">Agregar articulo</h1>
                            <p class="wow fadeInUp">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet. Dolore magna aliquam erat volutpat.</p>
                        </div>
                        <div class="contact-form wow fadeInUp">
                            <form id="contact-form" method="post" action="/guardar_producto">
                                <input type="hidden" name="external" value="0" id="external"/>
                                <div class="col-md-6 col-sm-6">
                                    <select class="form-control" name="categoria" id="categoria" >

                                    </select>
                                </div>
                                <div class="col-md-6 col-sm-6">
                                    <input name="marca" type="text" class="form-control" placeholder="Marca" required>
                                </div>

                                <div class="col-md-6 col-sm-6">
                                    <input name="nombre" type="text" class="form-control" placeholder="Nombre" required>
                                </div>

                                <div class="col-md-6 col-sm-6">
                                    <input name="detalle" type="text" class="form-control" placeholder="Detalle" required>
                                </div>
                                <div class="col-md-6 col-sm-6">
                                    <input name="precio" type="text" class="form-control" placeholder="Precio" required>
                                </div>
                                <div class="col-md-6 col-sm-6">
                                    <input name="cantidad" type="number" class="form-control" placeholder="Cantidad" required>
                                </div>

                                <div class="col-md-offset-3 col-md-6 col-sm-offset-2 col-sm-8">
                                    <input name="submit" type="submit" class="form-control submit" id="submit" value="Registralo ahora">
                                </div>
                            </form>
                        </div>
                    </div>

                </div>
            </div>
        </section>



        <!-- feature section -->
        <section id="feature">
            <div class="container">
                <div class="row">

                    <svg preserveAspectRatio="none" viewBox="0 0 100 102" height="100" width="100%" version="1.1" xmlns="http://www.w3.org/2000/svg" class="svgcolor-light">
                    <path d="M0 0 L50 100 L100 0 Z"></path>
                    </svg>
                    <div class="section-title text-center">
                        <h1 class="wow fadeInUp" >Lista de Articulos</h1>                    
                    </div>

                    <table class="table" id="tabla">
                        <thead>
                            <tr>
                                <th>Nro</th>
                                <th>Marca</th>
                                <th>Nombre</th>
                                <th>Detalle</th>
                                <th>Foto</th>
                                <th>Precio</th>
                                <th>Accion</th>

                            </tr>
                        </thead>
                        <tbody>

                        </tbody>
                    </table>
                    <div class="clearfix text-center col-md-12 col-sm-12">
                        <a href="#contact" class="btn btn-default smoothScroll">Talk to us</a>
                    </div>

                </div>
            </div>
        </section>
        <!-- contact section -->
        <section id="contact">
            <div class="container">
                <div class="row">

                    <div class="col-md-3 col-sm-6">
                        <a href="#">
                            <img class="img-fluid d-block mx-auto" src="img/logos/envato.jpg" alt="">
                        </a>
                    </div>
                    <div class="col-md-3 col-sm-6">
                        <a href="#">
                            <img class="img-fluid d-block mx-auto" src="img/logos/designmodo.jpg" alt="">
                        </a>
                    </div>
                    <div class="col-md-3 col-sm-6">
                        <a href="#">
                            <img class="img-fluid d-block mx-auto" src="img/logos/themeforest.jpg" alt="">
                        </a>
                    </div>
                    <div class="col-md-3 col-sm-6">
                        <a href="#">
                            <img class="img-fluid d-block mx-auto" src="img/logos/creative-market.jpg" alt="">
                        </a>
                    </div>

                </div>
            </div>
        </section>

        <!-- footer section -->
        <footer>
            <div class="container">
                <div class="row">

                    <svg class="svgcolor-light" preserveAspectRatio="none" viewBox="0 0 100 102" height="100" width="100%" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <path d="M0 0 L50 100 L100 0 Z"></path>
                    </svg>
                    <div class="col-md-4 col-sm-6">
                        <div class="wow fadeInUp" data-wow-delay="0.3s">
                            <p class="copyright-text">Copyright &copy; 2016 Your Company <br> </div>
                    </div>
                    <div class="col-md-1 col-sm-1"></div>
                    <div class="col-md-4 col-sm-5">
                        <ul class="social-icon">
                            <li><a href="#" class="fa fa-facebook wow bounceIn" data-wow-delay="0.9s"></a></li>
                            <li><a href="#" class="fa fa-twitter wow bounceIn" data-wow-delay="1.2s"></a></li>
                            <li><a href="#" class="fa fa-behance wow bounceIn" data-wow-delay="1.4s"></a></li>
                            <li><a href="#" class="fa fa-dribbble wow bounceIn" data-wow-delay="1.6s"></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </footer>

        <!-- modal -->
        <div class="modal fade" id="modal1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content modal-popup">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h2 style="color: #333;" class="modal-title">Editar articulo</h2>
                    </div>
                    <form action="#" method="post">
                        <input type="hidden" name="external1" value="0" id="external1"/>
                        <select  style="color: #333;" class="form-control" name="categoria" id="categoria1" >
                        </select>
                        <input style="color: #333;" id="marca" name="marca" type="text" class="form-control" placeholder="Marca" required>
                        <input style="color: #333;" id="nombre" name="nombre" type="text" class="form-control" placeholder="Nombre" required>
                        <input style="color: #333;" id="detalle" name="detalle" type="text" class="form-control" placeholder="Detalle" required>
                        <input style="color: #333;" id="precio" name="precio" type="text" class="form-control" placeholder="Precio" required>
                        <input style="color: #333;" id="cantidad" name="cantidad" type="number" class="form-control" placeholder="Cantidad" required>
                        <input style="color: #333;" name="submit" type="submit" class="form-control" id="submit" value="Modificar">
                    </form>
                    <p>Thank you for your visiting!</p>
                </div>
            </div>
        </div>


        <!-- Back top -->
        <a href="#back-top" class="go-top"><i class="fa fa-angle-up"></i></a>


        <script src="js/vegas.min.js"></script>

        <script src="js/wow.min.js"></script>
        <script src="js/smoothscroll.js"></script>
        <script src="js/custom.js"></script>

    </body>
</html>

